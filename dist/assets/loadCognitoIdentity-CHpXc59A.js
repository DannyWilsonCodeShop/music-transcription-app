var Qe=Object.defineProperty;var We=(e,t,r)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var m=(e,t,r)=>We(e,typeof t!="symbol"?t+"":t,r);import{H as J,n as F,a as Xe,S as de,m as Ye,d as Ze,i as et,T as C,b as ue,N as T,f as xe,c as O,e as tt,t as ve,L as Oe,g as Te,p as st,h as rt,j as nt,k as it,v as ot,R as at,l as ct,o as De,q as dt,E as ut,r as lt,s as pt,u as ht,w as mt,x as ft,y as yt,z as gt,A as Et,D as St,B as wt,C as Ct,F as bt,G as It,I as _t,J as At,K as Rt,M as kt,O as Pt,P as xt,Q as vt,U as Ot,V as Tt,W as Dt,X as Mt,Y as Nt,Z as $t,_ as Ut,$ as Ft,a0 as jt,a1 as Lt,a2 as zt,a3 as Me,a4 as Ne}from"./index-BH-LnLwl.js";class Ht{async sign(t,r,s){return t}}const Gt=e=>t=>async r=>{if(!J.isInstance(r.request))return t(r);const{request:s}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let n=s.hostname;s.port!=null&&(n+=`:${s.port}`),s.headers.host=n}return t(r)},Bt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},qt=e=>({applyToStack:t=>{t.add(Gt(e),Bt)}}),Vt=()=>(e,t)=>async r=>{var s,i;try{const n=await e(r),{clientName:a,commandName:c,logger:d,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:l}=o,h=u??t.inputFilterSensitiveLog,p=l??t.outputFilterSensitiveLog,{$metadata:g,...f}=n.output;return(s=d==null?void 0:d.info)==null||s.call(d,{clientName:a,commandName:c,input:h(r.input),output:p(f),metadata:g}),n}catch(n){const{clientName:a,commandName:c,logger:d,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:u}=o,l=u??t.inputFilterSensitiveLog;throw(i=d==null?void 0:d.error)==null||i.call(d,{clientName:a,commandName:c,input:l(r.input),error:n,metadata:n.$metadata}),n}},Jt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Kt=e=>({applyToStack:t=>{t.add(Vt(),Jt)}}),Qt={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Wt=()=>e=>async t=>e(t),Xt=e=>({applyToStack:t=>{t.add(Wt(),Qt)}}),Yt=void 0;function Zt(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function es(e){const t=F(e.userAgentAppId??Yt),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{var i,n;const s=await t();if(!Zt(s)){const a=((n=(i=e.logger)==null?void 0:i.constructor)==null?void 0:n.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?a==null||a.warn("userAgentAppId must be a string or undefined."):s.length>50&&(a==null||a.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return s}})}function ts(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}function A(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}const le=e=>{var t,r;return Xe.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},$e=e=>new Date(Date.now()+e),ss=(e,t)=>Math.abs($e(t).getTime()-e)>=3e5,pe=(e,t)=>{const r=Date.parse(e);return ss(r,t)?r-Date.now():t},j=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},rs=async e=>{var o,u,l;const t=j("context",e.context),r=j("config",e.config),s=(l=(u=(o=t.endpointV2)==null?void 0:o.properties)==null?void 0:u.authSchemes)==null?void 0:l[0],n=await j("signer",r.signer)(s),a=e==null?void 0:e.signingRegion,c=e==null?void 0:e.signingRegionSet,d=e==null?void 0:e.signingName;return{config:r,signer:n,signingRegion:a,signingRegionSet:c,signingName:d}};class ns{async sign(t,r,s){var l;if(!J.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const i=await rs(s),{config:n,signer:a}=i;let{signingRegion:c,signingName:d}=i;const o=s.context;if(((l=o==null?void 0:o.authSchemes)==null?void 0:l.length)??!1){const[h,p]=o.authSchemes;(h==null?void 0:h.name)==="sigv4a"&&(p==null?void 0:p.name)==="sigv4"&&(c=(p==null?void 0:p.signingRegion)??c,d=(p==null?void 0:p.signingName)??d)}return await a.sign(t,{signingDate:$e(n.systemClockOffset),signingRegion:c,signingService:d})}errorHandler(t){return r=>{const s=r.ServerTime??le(r.$response);if(s){const i=j("config",t.config),n=i.systemClockOffset;i.systemClockOffset=pe(s,i.systemClockOffset),i.systemClockOffset!==n&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){const s=le(t);if(s){const i=j("config",r.config);i.systemClockOffset=pe(s,i.systemClockOffset)}}}const is=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(o){o&&o!==t&&o!==s&&(r=!0),t=o;const u=os(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),l=as(e,u);if(r&&!l.attributed){const h=typeof t=="object"&&t!==null;s=async p=>{const f=await l(p);return h&&(!f.$source||Object.keys(f.$source).length===0)?ts(f,"CREDENTIALS_CODE","e"):f},s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0}else s=l},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;const{signingEscapePath:i=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:a}=e;let c;return e.signer?c=F(e.signer):e.regionInfoProvider?c=()=>F(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,u])=>{const{signingRegion:l,signingService:h}=o;e.signingRegion=e.signingRegion||l||u,e.signingName=e.signingName||h||e.serviceId;const p={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i},g=e.signerConstructor||de;return new g(p)}):c=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await F(e.region)(),properties:{}},o);const u=o.signingRegion,l=o.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||l||e.serviceId;const h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:i},p=e.signerConstructor||de;return new p(h)},Object.assign(e,{systemClockOffset:n,signingEscapePath:i,signer:c})};function os(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t!=null&&t.memoized?s=t:s=Ye(t,et,Ze):r?s=F(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function as(e,t){if(t.configBound)return t;const r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}class cs{constructor(t=!1){m(this,"queryCompat");this.queryCompat=t}resolveRestContentType(t,r){const s=r.getMemberSchemas(),i=Object.values(s).find(n=>!!n.getMergedTraits().httpPayload);if(i){const n=i.getMergedTraits().mediaType;return n||(i.isStringSchema()?"text/plain":i.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(a=>{const{httpQuery:c,httpQueryParams:d,httpHeader:o,httpLabel:u,httpPrefixHeaders:l}=a.getMergedTraits();return!c&&!d&&!o&&!u&&l===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,i,n,a){let c=r,d=t;t.includes("#")&&([c,d]=t.split("#"));const o={$metadata:n,$fault:s.statusCode<500?"client":"server"},u=C.for(c);try{return{errorSchema:(a==null?void 0:a(u,d))??u.getSchema(t),errorMetadata:o}}catch{i.message=i.message??i.Message??"UnknownError";const h=C.for("smithy.ts.sdk.synthetic."+c),p=h.getBaseException();if(p){const g=h.getErrorCtor(p)??Error;throw this.decorateServiceException(Object.assign(new g({name:d}),o),i)}throw this.decorateServiceException(Object.assign(new Error(d),o),i)}}decorateServiceException(t,r={}){if(this.queryCompat){const s=t.Message??r.Message,i=ue(t,r);s&&(i.message=s),i.Error={...i.Error,Type:i.Error.Type,Code:i.Error.Code,Message:i.Error.message??i.Error.Message??s};const n=i.$metadata.requestId;return n&&(i.RequestId=n),i}return ue(t,r)}setQueryCompatError(t,r){var i;const s=(i=r.headers)==null?void 0:i["x-amzn-query-error"];if(t!==void 0&&s!=null){const[n,a]=s.split(";"),c=Object.entries(t),d={Code:n,Type:a};Object.assign(t,d);for(const[o,u]of c)d[o==="message"?"Message":o]=u;delete d.__type,t.Error=d}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch{return t.find(i=>{var n;return((n=T.of(i).getMergedTraits().awsQueryError)==null?void 0:n[0])===r})}}}class K{constructor(){m(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}const Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he=Object.entries(Ue).reduce((e,[t,r])=>(e[r]=Number(t),e),{}),ds=Ue.split(""),M=6,L=8,us=63,Fe=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),s=new DataView(r);for(let i=0;i<e.length;i+=4){let n=0,a=0;for(let o=i,u=i+3;o<=u;o++)if(e[o]!=="="){if(!(e[o]in he))throw new TypeError(`Invalid character ${e[o]} in base64 string.`);n|=he[e[o]]<<(u-o)*M,a+=M}else n>>=M;const c=i/4*3;n>>=a%L;const d=Math.floor(a/L);for(let o=0;o<d;o++){const u=(d-o-1)*L;s.setUint8(c+o,(n&255<<u)>>u)}}return new Uint8Array(r)};function V(e){let t;typeof e=="string"?t=xe(e):t=e;const r=typeof t=="object"&&typeof t.length=="number",s=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!s)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let n=0;n<t.length;n+=3){let a=0,c=0;for(let o=n,u=Math.min(n+3,t.length);o<u;o++)a|=t[o]<<(u-o-1)*L,c+=L;const d=Math.ceil(c/M);a<<=d*M-c;for(let o=1;o<=d;o++){const u=(d-o)*M;i+=ds[(a&us<<u)>>u]}i+="==".slice(0,4-d)}return i}function*ls(e,t){if(e.isUnitSchema())return;const r=e.getSchema();for(let s=0;s<r[4].length;++s){const i=r[4][s],n=r[5][s],a=new T([n,0],i);!(i in t)&&!a.isIdempotencyToken()||(yield[i,a])}}function*ps(e,t,r){if(e.isUnitSchema())return;const s=e.getSchema();let i=Object.keys(t).filter(n=>n!=="__type").length;for(let n=0;n<s[4].length&&i!==0;++n){const a=s[4][n],c=s[5][n],d=new T([c,0],a);let o=a;r&&(o=d.getMergedTraits()[r]??a),o in t&&(yield[a,d],i-=1)}}class hs{constructor(t,r){m(this,"from");m(this,"to");m(this,"keys");this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter(s=>s!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){const t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}function ms(e,t,r){if(r!=null&&r.source){const s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new O(s,"bigDecimal"):BigInt(s)}return t}const fs=(e,t)=>tt(e,t).then(r=>((t==null?void 0:t.utf8Encoder)??ve)(r)),ys=(e,t)=>fs(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw(s==null?void 0:s.name)==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),gs=(e,t)=>{const r=(n,a)=>Object.keys(n).find(c=>c.toLowerCase()===a.toLowerCase()),s=n=>{let a=n;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return s(e.headers[i]);if(t&&typeof t=="object"){const n=r(t,"code");if(n&&t[n]!==void 0)return s(t[n]);if(t.__type!==void 0)return s(t.__type)}};class Es extends K{constructor(r){super();m(this,"settings");this.settings=r}async read(r,s){return this._read(r,typeof s=="string"?JSON.parse(s,ms):await ys(s,this.serdeContext))}readObject(r,s){return this._read(r,s)}_read(r,s){const i=s!==null&&typeof s=="object",n=T.of(r);if(i){if(n.isStructSchema()){const c=s,d=n.isUnionSchema(),o={};let u;const{jsonName:l}=this.settings;l&&(u={});let h;d&&(h=new hs(c,o));for(const[p,g]of ps(n,c,l?"jsonName":!1)){let f=p;l&&(f=g.getMergedTraits().jsonName??f,u[f]=p),d&&h.mark(f),c[f]!=null&&(o[p]=this._read(g,c[f]))}if(d)h.writeUnknown();else if(typeof c.__type=="string")for(const[p,g]of Object.entries(c)){const f=l?u[p]??p:p;f in o||(o[f]=g)}return o}if(Array.isArray(s)&&n.isListSchema()){const c=n.getValueSchema(),d=[],o=!!n.getMergedTraits().sparse;for(const u of s)(o||u!=null)&&d.push(this._read(c,u));return d}if(n.isMapSchema()){const c=n.getValueSchema(),d={},o=!!n.getMergedTraits().sparse;for(const[u,l]of Object.entries(s))(o||l!=null)&&(d[u]=this._read(c,l));return d}}if(n.isBlobSchema()&&typeof s=="string")return Fe(s);const a=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof s=="string"&&a)return a==="application/json"||a.endsWith("+json")?Oe.from(s):s;if(n.isTimestampSchema()&&s!=null)switch(Te(n,this.settings)){case 5:return nt(s);case 6:return rt(s);case 7:return st(s);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",s),new Date(s)}if(n.isBigIntegerSchema()&&(typeof s=="number"||typeof s=="string"))return BigInt(s);if(n.isBigDecimalSchema()&&s!=null){if(s instanceof O)return s;const c=s;return c.type==="bigDecimal"&&"string"in c?new O(c.string,c.type):new O(String(s),"bigDecimal")}if(n.isNumericSchema()&&typeof s=="string"){switch(s){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return s}if(n.isDocumentSchema())if(i){const c=Array.isArray(s)?[]:{};for(const[d,o]of Object.entries(s))o instanceof O?c[d]=o:c[d]=this._read(n,o);return c}else return structuredClone(s);return s}}const me="Î";class Ss{constructor(){m(this,"values",new Map);m(this,"counter",0);m(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof O){const s=`${me+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){const s=r.toString(),i=`${me+"b"+this.counter++}_`+s;return this.values.set(`"${i}"`,s),i}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(const[r,s]of this.values)t=t.replace(r,s);return t}}class ws extends K{constructor(r){super();m(this,"settings");m(this,"buffer");m(this,"useReplacer",!1);m(this,"rootSchema");this.settings=r}write(r,s){this.rootSchema=T.of(r),this.buffer=this._write(this.rootSchema,s)}writeDiscriminatedDocument(r,s){this.write(r,s),typeof this.buffer=="object"&&(this.buffer.__type=T.of(r).getName(!0))}flush(){const{rootSchema:r,useReplacer:s}=this;if(this.rootSchema=void 0,this.useReplacer=!1,r!=null&&r.isStructSchema()||r!=null&&r.isDocumentSchema()){if(!s)return JSON.stringify(this.buffer);const i=new Ss;return i.replaceInJson(JSON.stringify(this.buffer,i.createReplacer(),0))}return this.buffer}_write(r,s,i){var c,d;const n=s!==null&&typeof s=="object",a=T.of(r);if(n){if(a.isStructSchema()){const o=s,u={},{jsonName:l}=this.settings;let h;l&&(h={});for(const[p,g]of ls(a,o)){const f=this._write(g,o[p],a);if(f!==void 0){let v=p;l&&(v=g.getMergedTraits().jsonName??p,h[p]=v),u[v]=f}}if(a.isUnionSchema()&&Object.keys(u).length===0){const{$unknown:p}=o;if(Array.isArray(p)){const[g,f]=p;u[g]=this._write(15,f)}}else if(typeof o.__type=="string")for(const[p,g]of Object.entries(o)){const f=l?h[p]??p:p;f in u||(u[f]=this._write(15,g))}return u}if(Array.isArray(s)&&a.isListSchema()){const o=a.getValueSchema(),u=[],l=!!a.getMergedTraits().sparse;for(const h of s)(l||h!=null)&&u.push(this._write(o,h));return u}if(a.isMapSchema()){const o=a.getValueSchema(),u={},l=!!a.getMergedTraits().sparse;for(const[h,p]of Object.entries(s))(l||p!=null)&&(u[h]=this._write(o,p));return u}if(s instanceof Uint8Array&&(a.isBlobSchema()||a.isDocumentSchema()))return a===this.rootSchema?s:(((c=this.serdeContext)==null?void 0:c.base64Encoder)??V)(s);if(s instanceof Date&&(a.isTimestampSchema()||a.isDocumentSchema()))switch(Te(a,this.settings)){case 5:return s.toISOString().replace(".000Z","Z");case 6:return it(s);case 7:return s.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",s),s.getTime()/1e3}s instanceof O&&(this.useReplacer=!0)}if(!(s===null&&(i!=null&&i.isStructSchema()))){if(a.isStringSchema()){if(typeof s>"u"&&a.isIdempotencyToken())return ot();const o=a.getMergedTraits().mediaType;return s!=null&&o&&(o==="application/json"||o.endsWith("+json"))?Oe.from(s):s}if(typeof s=="number"&&a.isNumericSchema())return Math.abs(s)===1/0||isNaN(s)?String(s):s;if(typeof s=="string"&&a.isBlobSchema())return a===this.rootSchema?s:(((d=this.serdeContext)==null?void 0:d.base64Encoder)??V)(s);if(typeof s=="bigint"&&(this.useReplacer=!0),a.isDocumentSchema())if(n){const o=Array.isArray(s)?[]:{};for(const[u,l]of Object.entries(s))l instanceof O?(this.useReplacer=!0,o[u]=l):o[u]=this._write(a,l);return o}else return structuredClone(s);return s}}}class Cs extends K{constructor(r){super();m(this,"settings");this.settings=r}createSerializer(){const r=new ws(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){const r=new Es(this.settings);return r.setSerdeContext(this.serdeContext),r}}class bs extends at{constructor({defaultNamespace:r,serviceTarget:s,awsQueryCompatible:i,jsonCodec:n}){super({defaultNamespace:r});m(this,"serializer");m(this,"deserializer");m(this,"serviceTarget");m(this,"codec");m(this,"mixin");m(this,"awsQueryCompatible");this.serviceTarget=s,this.codec=n??new Cs({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!i,this.mixin=new cs(this.awsQueryCompatible)}async serializeRequest(r,s,i){const n=await super.serializeRequest(r,s,i);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(ct(r.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(r,s,i,n,a){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,i);const c=gs(i,n)??"Unknown",{errorSchema:d,errorMetadata:o}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,i,n,a,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=T.of(d),l=n.message??n.Message??"Unknown",h=C.for(d[1]).getErrorCtor(d)??Error,p=new h(l),g={};for(const[f,v]of u.structIterator())n[f]!=null&&(g[f]=this.codec.createDeserializer().readObject(v,n[f]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,g),this.mixin.decorateServiceException(Object.assign(p,o,{$fault:u.getMergedTraits().error,message:l},g),n)}}class Is extends bs{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s,jsonCodec:i}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s,jsonCodec:i})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}const _s=/\d{12}\.ddb/;async function As(e,t,r){var n,a,c,d,o,u,l;const s=r.request;if(((n=s==null?void 0:s.headers)==null?void 0:n["smithy-protocol"])==="rpc-v2-cbor"&&A(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const h=await t.retryStrategy();typeof h.acquireInitialRetryToken=="function"?(c=(a=h.constructor)==null?void 0:a.name)!=null&&c.includes("Adaptive")?A(e,"RETRY_MODE_ADAPTIVE","F"):A(e,"RETRY_MODE_STANDARD","E"):A(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const h=e.endpointV2;switch(String((d=h==null?void 0:h.url)==null?void 0:d.hostname).match(_s)&&A(e,"ACCOUNT_ID_ENDPOINT","O"),await((o=t.accountIdEndpointMode)==null?void 0:o.call(t))){case"disabled":A(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":A(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":A(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const i=(l=(u=e.__smithy_context)==null?void 0:u.selectedHttpAuthScheme)==null?void 0:l.identity;if(i!=null&&i.$source){const h=i;h.accountId&&A(e,"RESOLVED_ACCOUNT_ID","T");for(const[p,g]of Object.entries(h.$source??{}))A(e,p,g)}}const fe="user-agent",B="x-amz-user-agent",ye=" ",q="/",Rs=/[^!$%&'*+\-.^_`|~\w]/g,ks=/[^!$%&'*+\-.^_`|~\w#]/g,ge="-",Ps=1024;function xs(e){let t="";for(const r in e){const s=e[r];if(t.length+s.length+1<=Ps){t.length?t+=","+s:t+=s;continue}break}return t}const vs=e=>(t,r)=>async s=>{var p,g,f,v;const{request:i}=s;if(!J.isInstance(i))return t(s);const{headers:n}=i,a=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(H))||[],c=(await e.defaultUserAgentProvider()).map(H);await As(r,e,s);const d=r;c.push(`m/${xs(Object.assign({},(g=r.__smithy_context)==null?void 0:g.features,(f=d.__aws_sdk_context)==null?void 0:f.features))}`);const o=((v=e==null?void 0:e.customUserAgent)==null?void 0:v.map(H))||[],u=await e.userAgentAppId();u&&c.push(H(["app",`${u}`]));const l=[].concat([...c,...a,...o]).join(ye),h=[...c.filter(Ke=>Ke.startsWith("aws-sdk-")),...o].join(ye);return e.runtime!=="browser"?(h&&(n[B]=n[B]?`${n[fe]} ${h}`:h),n[fe]=l):n[B]=l,t({...s,request:i})},H=e=>{var a;const t=e[0].split(q).map(c=>c.replace(Rs,ge)).join(q),r=(a=e[1])==null?void 0:a.replace(ks,ge),s=t.indexOf(q),i=t.substring(0,s);let n=t.substring(s+1);return i==="api"&&(n=n.toLowerCase()),[i,n,r].filter(c=>c&&c.length>0).reduce((c,d,o)=>{switch(o){case 0:return d;case 1:return`${c}/${d}`;default:return`${c}#${d}`}},"")},Os={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ts=e=>({applyToStack:t=>{t.add(vs(e),Os)}}),Ds=async(e,t,r)=>({operation:dt(t).operation,region:await De(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ms(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function G(e){return{schemeId:"smithy.api#noAuth"}}const Ns=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(G());break}case"GetId":{t.push(G());break}case"GetOpenIdToken":{t.push(G());break}case"UnlinkIdentity":{t.push(G());break}default:t.push(Ms(e))}return t},$s=e=>{const t=is(e);return Object.assign(t,{authSchemePreference:De(e.authSchemePreference??[])})},Us=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),je={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Fs="3.974.0",js={version:Fs},Ls=({serviceId:e,clientVersion:t})=>async r=>{var p,g,f;const s=typeof window<"u"?window.navigator:void 0,i=(s==null?void 0:s.userAgent)??"",n=((p=s==null?void 0:s.userAgentData)==null?void 0:p.platform)??Ee.os(i)??"other",a=void 0,c=((g=s==null?void 0:s.userAgentData)==null?void 0:g.brands)??[],d=c[c.length-1],o=(d==null?void 0:d.brand)??Ee.browser(i)??"unknown",u=(d==null?void 0:d.version)??"unknown",l=[["aws-sdk-js",t],["ua","2.1"],[`os/${n}`,a],["lang/js"],["md/browser",`${o}_${u}`]];e&&l.push([`api/${e}`,t]);const h=await((f=r==null?void 0:r.userAgentAppId)==null?void 0:f.call(r));return h&&l.push([`app/${h}`]),l},Ee={os(e){if(/iPhone|iPad|iPod/.test(e))return"iOS";if(/Macintosh|Mac OS X/.test(e))return"macOS";if(/Windows NT/.test(e))return"Windows";if(/Android/.test(e))return"Android";if(/Linux/.test(e))return"Linux"},browser(e){if(/EdgiOS|EdgA|Edg\//.test(e))return"Microsoft Edge";if(/Firefox\//.test(e))return"Firefox";if(/Chrome\//.test(e))return"Chrome";if(/Safari\//.test(e))return"Safari"}},Le="required",S="fn",w="argv",N="ref",Se=!0,we="isSet",z="booleanEquals",D="error",R="endpoint",x="tree",Q="PartitionResult",W="getAttr",$="stringEquals",Ce={[Le]:!1,type:"string"},be={[Le]:!0,default:!1,type:"boolean"},Ie={[N]:"Endpoint"},ze={[S]:z,[w]:[{[N]:"UseFIPS"},!0]},He={[S]:z,[w]:[{[N]:"UseDualStack"},!0]},E={},U={[N]:"Region"},_e={[S]:W,[w]:[{[N]:Q},"supportsFIPS"]},Ge={[N]:Q},Ae={[S]:z,[w]:[!0,{[S]:W,[w]:[Ge,"supportsDualStack"]}]},Re=[ze],ke=[He],Pe=[U],zs={parameters:{Region:Ce,UseDualStack:be,UseFIPS:be,Endpoint:Ce},rules:[{conditions:[{[S]:we,[w]:[Ie]}],rules:[{conditions:Re,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:D},{conditions:ke,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:D},{endpoint:{url:Ie,properties:E,headers:E},type:R}],type:x},{conditions:[{[S]:we,[w]:Pe}],rules:[{conditions:[{[S]:"aws.partition",[w]:Pe,assign:Q}],rules:[{conditions:[ze,He],rules:[{conditions:[{[S]:z,[w]:[Se,_e]},Ae],rules:[{conditions:[{[S]:$,[w]:[U,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:E,headers:E},type:R},{conditions:[{[S]:$,[w]:[U,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:E,headers:E},type:R},{conditions:[{[S]:$,[w]:[U,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:E,headers:E},type:R},{conditions:[{[S]:$,[w]:[U,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:E,headers:E},type:R},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},type:R}],type:x},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:D}],type:x},{conditions:Re,rules:[{conditions:[{[S]:z,[w]:[_e,Se]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:E,headers:E},type:R}],type:x},{error:"FIPS is enabled but this partition does not support FIPS",type:D}],type:x},{conditions:ke,rules:[{conditions:[Ae],rules:[{conditions:[{[S]:$,[w]:["aws",{[S]:W,[w]:[Ge,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:E,headers:E},type:R},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},type:R}],type:x},{error:"DualStack is enabled but this partition does not support DualStack",type:D}],type:x},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:E,headers:E},type:R}],type:x}],type:x},{error:"Invalid Configuration: Missing Region",type:D}]},Hs=zs,Gs=new ut({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Bs=(e,t={})=>Gs.get(e,()=>lt(Hs,{endpointParams:e,logger:t.logger}));ht.aws=pt;const qs=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??Fe,base64Encoder:(e==null?void 0:e.base64Encoder)??V,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Bs,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Ns,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ns},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ht}],logger:(e==null?void 0:e.logger)??new ft,protocol:(e==null?void 0:e.protocol)??Is,protocolSettings:(e==null?void 0:e.protocolSettings)??{defaultNamespace:"com.amazonaws.cognitoidentity",xmlNamespace:"http://cognito-identity.amazonaws.com/doc/2014-06-30/",version:"2014-06-30",serviceTarget:"AWSCognitoIdentityService"},serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??mt,utf8Decoder:(e==null?void 0:e.utf8Decoder)??xe,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ve}),Vs=e=>{const t=yt(e),r=()=>t().then(Rt),s=qs(e);return{...s,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ct,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(i=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ls({serviceId:s.serviceId,clientVersion:js.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??wt,region:(e==null?void 0:e.region)??At("Region is missing"),requestHandler:_t.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||St),sha256:(e==null?void 0:e.sha256)??Et,streamCollector:(e==null?void 0:e.streamCollector)??gt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(It)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(bt))}},Js=e=>({setRegion(t){e.region=t},region(){return e.region}}),Ks=e=>({region:e.region()}),Qs=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(i){const n=t.findIndex(a=>a.schemeId===i.schemeId);n===-1?t.push(i):t.splice(n,1,i)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){s=i},credentials(){return s}}},Ws=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Xs=(e,t)=>{const r=Object.assign(Js(e),kt(e),Pt(e),Qs(e));return t.forEach(s=>s.configure(r)),Object.assign(e,Ks(r),xt(r),vt(r),Ws(r))};class Qr extends Ot{constructor(...[r]){const s=Vs(r||{});super(s);m(this,"config");this.initConfig=s;const i=Us(s),n=es(i),a=Tt(n),c=Dt(a),d=c,o=Mt(d),u=$s(o),l=Xs(u,(r==null?void 0:r.extensions)||[]);this.config=l,this.middlewareStack.use(Nt(this.config)),this.middlewareStack.use(Ts(this.config)),this.middlewareStack.use($t(this.config)),this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(qt(this.config)),this.middlewareStack.use(Kt(this.config)),this.middlewareStack.use(Xt(this.config)),this.middlewareStack.use(Ft(this.config,{httpAuthSchemeParametersProvider:Ds,identityProviderConfigProvider:async h=>new jt({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Lt(this.config))}destroy(){super.destroy()}}class b extends zt{constructor(t){super(t),Object.setPrototypeOf(this,b.prototype)}}class X extends b{constructor(r){super({name:"InternalErrorException",$fault:"server",...r});m(this,"name","InternalErrorException");m(this,"$fault","server");Object.setPrototypeOf(this,X.prototype)}}class Y extends b{constructor(r){super({name:"InvalidParameterException",$fault:"client",...r});m(this,"name","InvalidParameterException");m(this,"$fault","client");Object.setPrototypeOf(this,Y.prototype)}}class Z extends b{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});m(this,"name","LimitExceededException");m(this,"$fault","client");Object.setPrototypeOf(this,Z.prototype)}}class ee extends b{constructor(r){super({name:"NotAuthorizedException",$fault:"client",...r});m(this,"name","NotAuthorizedException");m(this,"$fault","client");Object.setPrototypeOf(this,ee.prototype)}}class te extends b{constructor(r){super({name:"ResourceConflictException",$fault:"client",...r});m(this,"name","ResourceConflictException");m(this,"$fault","client");Object.setPrototypeOf(this,te.prototype)}}class se extends b{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});m(this,"name","TooManyRequestsException");m(this,"$fault","client");Object.setPrototypeOf(this,se.prototype)}}class re extends b{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});m(this,"name","ResourceNotFoundException");m(this,"$fault","client");Object.setPrototypeOf(this,re.prototype)}}class ne extends b{constructor(r){super({name:"ExternalServiceException",$fault:"client",...r});m(this,"name","ExternalServiceException");m(this,"$fault","client");Object.setPrototypeOf(this,ne.prototype)}}class ie extends b{constructor(r){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...r});m(this,"name","InvalidIdentityPoolConfigurationException");m(this,"$fault","client");Object.setPrototypeOf(this,ie.prototype)}}class oe extends b{constructor(r){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...r});m(this,"name","DeveloperUserAlreadyRegisteredException");m(this,"$fault","client");Object.setPrototypeOf(this,oe.prototype)}}class ae extends b{constructor(r){super({name:"ConcurrentModificationException",$fault:"client",...r});m(this,"name","ConcurrentModificationException");m(this,"$fault","client");Object.setPrototypeOf(this,ae.prototype)}}const Ys="AccountId",Zs="AccessKeyId",Be="Credentials",er="ConcurrentModificationException",tr="CustomRoleArn",sr="DeveloperUserAlreadyRegisteredException",rr="Expiration",nr="ExternalServiceException",ir="GetCredentialsForIdentity",or="GetCredentialsForIdentityInput",ar="GetCredentialsForIdentityResponse",cr="GetId",dr="GetIdInput",ur="GetIdResponse",lr="InternalErrorException",ce="IdentityId",pr="InvalidIdentityPoolConfigurationException",hr="InvalidParameterException",mr="IdentityPoolId",fr="IdentityProviderToken",qe="Logins",yr="LimitExceededException",gr="LoginsMap",Er="NotAuthorizedException",Sr="ResourceConflictException",wr="ResourceNotFoundException",Cr="SecretKey",br="SecretKeyString",Ir="SessionToken",_r="TooManyRequestsException",k="client",I="error",P="httpError",_="message",Ar="server",Ve="smithy.ts.sdk.synthetic.com.amazonaws.cognitoidentity",y="com.amazonaws.cognitoidentity";var Rr=[0,y,fr,8,0],kr=[0,y,br,8,0],Pr=[-3,y,er,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(Pr,ae);var xr=[3,y,Be,0,[Zs,Cr,Ir,rr],[0,[()=>kr,0],0,4]],vr=[-3,y,sr,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(vr,oe);var Or=[-3,y,nr,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(Or,ne);var Tr=[3,y,or,0,[ce,qe,tr],[0,[()=>Je,0],0],1],Dr=[3,y,ar,0,[ce,Be],[0,[()=>xr,0]]],Mr=[3,y,dr,0,[mr,Ys,qe],[0,0,[()=>Je,0]],1],Nr=[3,y,ur,0,[ce],[0]],$r=[-3,y,lr,{[I]:Ar},[_],[0]];C.for(y).registerError($r,X);var Ur=[-3,y,pr,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(Ur,ie);var Fr=[-3,y,hr,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(Fr,Y);var jr=[-3,y,yr,{[I]:k,[P]:400},[_],[0]];C.for(y).registerError(jr,Z);var Lr=[-3,y,Er,{[I]:k,[P]:403},[_],[0]];C.for(y).registerError(Lr,ee);var zr=[-3,y,Sr,{[I]:k,[P]:409},[_],[0]];C.for(y).registerError(zr,te);var Hr=[-3,y,wr,{[I]:k,[P]:404},[_],[0]];C.for(y).registerError(Hr,re);var Gr=[-3,y,_r,{[I]:k,[P]:429},[_],[0]];C.for(y).registerError(Gr,se);var Br=[-3,Ve,"CognitoIdentityServiceException",0,[],[]];C.for(Ve).registerError(Br,b);var Je=[2,y,gr,0,[0,0],[()=>Rr,0]],qr=[9,y,ir,0,()=>Tr,()=>Dr],Vr=[9,y,cr,0,()=>Mr,()=>Nr];class Wr extends Me.classBuilder().ep(je).m(function(t,r,s,i){return[Ne(s,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").sc(qr).build(){}class Xr extends Me.classBuilder().ep(je).m(function(t,r,s,i){return[Ne(s,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").sc(Vr).build(){}export{Qr as CognitoIdentityClient,Wr as GetCredentialsForIdentityCommand,Xr as GetIdCommand};
